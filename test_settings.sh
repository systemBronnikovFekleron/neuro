#!/bin/bash

echo "üß™ –¢–µ—Å—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ BronnikovExerciseApp"
echo "======================================"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –§–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–æ–∑–¥–∞–ª—Å—è?
echo ""
echo "1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫..."
SETTINGS_FILE=$(find ~/Library/Preferences -name "*BronnikovMethod*" -o -name "*ExerciseApp*" 2>/dev/null | head -1)
if [ -n "$SETTINGS_FILE" ]; then
    echo "‚úÖ –§–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–∞–π–¥–µ–Ω: $SETTINGS_FILE"
    ls -lh "$SETTINGS_FILE"
else
    echo "‚ö†Ô∏è  –§–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω (–ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫)"
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ë–î –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
echo ""
echo "2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π..."
if [ -f "data/bronnikov_sessions.db" ]; then
    echo "‚úÖ –ë–î –Ω–∞–π–¥–µ–Ω–∞"
    echo "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:"
    sqlite3 data/bronnikov_sessions.db "SELECT user_id, name, created_at FROM users;"
    echo ""
    echo "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π:"
    sqlite3 data/bronnikov_sessions.db "SELECT COUNT(*) FROM sessions;"
else
    echo "‚ùå –ë–î –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
echo ""
echo "3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö..."
if [ -d "data" ]; then
    echo "‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è data/ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
    echo "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:"
    find data -type f | sed 's/^/  /'
else
    echo "‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è data/ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
fi

echo ""
echo "======================================"
echo "‚úÖ –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ"
echo ""
echo "üìã –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:"
echo "1. –û—Ç–∫—Ä–æ–π—Ç–µ GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
echo "2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
echo "3. –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–µ–º—É –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã"
echo "4. –ó–∞–∫—Ä–æ–π—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–Ω–æ–≤–∞"
echo "5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å"
