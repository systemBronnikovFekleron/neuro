#include "HeavenEarth.h"

namespace Bronnikov {

HeavenEarth::HeavenEarth()
    : Exercise("Небо и Земля",
               "Развитие вертикального энергетического потока. "
               "Практикующий создает связь между земной энергией (снизу) "
               "и космической энергией (сверху).")
{
    initializeInstructions();
    initializeTargetMetrics();
}

void HeavenEarth::initializeInstructions() {
    // Preparation Phase
    addInstruction("Встаньте прямо, ноги на ширине плеч", ExercisePhase::Preparation, 10);
    addInstruction("Руки свободно висят вдоль тела", ExercisePhase::Preparation, 10);
    addInstruction("Закройте глаза и выровняйте дыхание", ExercisePhase::Preparation, 20);
    addInstruction("Почувствуйте вертикальную ось вашего тела", ExercisePhase::Preparation, 15);

    // Execution Phase
    addInstruction("Представьте корни, идущие от ваших ног в глубь земли", ExercisePhase::Execution, 30);
    addInstruction("Почувствуйте плотную, теплую энергию Земли", ExercisePhase::Execution, 25);
    addInstruction("Втяните земную энергию вверх через ноги", ExercisePhase::Execution, 30);
    addInstruction("Энергия поднимается по позвоночнику к макушке", ExercisePhase::Execution, 30);
    addInstruction("Представьте световой столб над вашей головой, уходящий в небо", ExercisePhase::Execution, 30);
    addInstruction("Почувствуйте легкую, светлую космическую энергию", ExercisePhase::Execution, 25);
    addInstruction("Втяните небесную энергию вниз через макушку", ExercisePhase::Execution, 30);
    addInstruction("Энергия опускается по позвоночнику вниз к стопам", ExercisePhase::Execution, 30);
    addInstruction("Создайте непрерывный поток: Земля → тело → Небо", ExercisePhase::Execution, 35);
    addInstruction("Почувствуйте себя проводником между двумя источниками", ExercisePhase::Execution, 40);

    // Completion Phase
    addInstruction("Замедлите движение энергетического потока", ExercisePhase::Completion, 20);
    addInstruction("Соберите энергию в центре тела (область пупка)", ExercisePhase::Completion, 20);
    addInstruction("Поблагодарите Небо и Землю", ExercisePhase::Completion, 10);
    addInstruction("Медленно откройте глаза", ExercisePhase::Completion, 10);
}

void HeavenEarth::initializeTargetMetrics() {
    // Целевое состояние: медитативное состояние проводника энергии
    // Упражнение требует глубокой релаксации и открытости

    m_target_metrics.alpha_change = 28.0;           // +28% (медитативное состояние)
    m_target_metrics.beta_change = 5.0;             // +5% (легкая концентрация)
    m_target_metrics.theta_change = 15.0;           // +15% (глубокая медитация)

    m_target_metrics.concentration_change = 15.0;   // +15% (удержание потока)
    m_target_metrics.relaxation_change = 32.0;      // +32% (очень высокая релаксация)

    // Веса для scoring - акцент на медитативном состоянии
    m_target_metrics.alpha_weight = 1.4;            // Альфа критична
    m_target_metrics.beta_weight = 0.4;
    m_target_metrics.theta_weight = 1.0;            // Тета важна
    m_target_metrics.concentration_weight = 0.8;
    m_target_metrics.relaxation_weight = 1.4;       // Релаксация критична
}

} // namespace Bronnikov
