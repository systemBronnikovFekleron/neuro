#include "SubtleBody.h"

namespace Bronnikov {

SubtleBody::SubtleBody()
    : Exercise("Тонкоматериальное тело",
               "Развитие ощущения всего энергетического тела целиком. "
               "Практикующий ощущает энергетическую оболочку, окружающую физическое тело.")
{
    initializeInstructions();
    initializeTargetMetrics();
}

void SubtleBody::initializeInstructions() {
    // Preparation Phase
    addInstruction("Примите удобное положение лежа на спине", ExercisePhase::Preparation, 15);
    addInstruction("Закройте глаза и полностью расслабьтесь", ExercisePhase::Preparation, 15);
    addInstruction("Сделайте серию глубоких дыханий", ExercisePhase::Preparation, 20);
    addInstruction("Почувствуйте вес своего тела", ExercisePhase::Preparation, 15);

    // Execution Phase
    addInstruction("Представьте легкое свечение на поверхности вашей кожи", ExercisePhase::Execution, 30);
    addInstruction("Почувствуйте, как это свечение расширяется на 5-10 см от тела", ExercisePhase::Execution, 30);
    addInstruction("Ощутите границу вашего энергетического тела", ExercisePhase::Execution, 30);
    addInstruction("Сканируйте вниманием всю поверхность энергетической оболочки", ExercisePhase::Execution, 35);
    addInstruction("Почувствуйте плотность и температуру тонкого тела", ExercisePhase::Execution, 30);
    addInstruction("Расширьте границы еще на 10-20 см", ExercisePhase::Execution, 30);
    addInstruction("Ощутите себя как сферу энергии", ExercisePhase::Execution, 30);
    addInstruction("Почувствуйте пульсацию энергии в тонком теле", ExercisePhase::Execution, 30);
    addInstruction("Осознайте единство физического и тонкого тел", ExercisePhase::Execution, 35);
    addInstruction("Побудьте в этом состоянии целостного восприятия", ExercisePhase::Execution, 40);

    // Completion Phase
    addInstruction("Постепенно сужайте границы энергетической оболочки", ExercisePhase::Completion, 20);
    addInstruction("Верните энергию к поверхности физического тела", ExercisePhase::Completion, 15);
    addInstruction("Пошевелите пальцами рук и ног", ExercisePhase::Completion, 10);
    addInstruction("Медленно откройте глаза", ExercisePhase::Completion, 15);
}

void SubtleBody::initializeTargetMetrics() {
    // Целевое состояние: глубокая осознанность и целостное восприятие
    // Упражнение требует баланса между концентрацией и расслаблением

    m_target_metrics.alpha_change = 25.0;           // +25% (глубокая осознанность)
    m_target_metrics.beta_change = 8.0;             // +8% (легкая концентрация)
    m_target_metrics.theta_change = 12.0;           // +12% (медитативное состояние)

    m_target_metrics.concentration_change = 18.0;   // +18% (целостное восприятие)
    m_target_metrics.relaxation_change = 28.0;      // +28% (высокая релаксация)

    // Веса для scoring - баланс всех показателей
    m_target_metrics.alpha_weight = 1.3;            // Альфа очень важна
    m_target_metrics.beta_weight = 0.6;
    m_target_metrics.theta_weight = 0.8;            // Тета важна
    m_target_metrics.concentration_weight = 1.0;
    m_target_metrics.relaxation_weight = 1.3;       // Релаксация очень важна
}

} // namespace Bronnikov
